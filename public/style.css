/* ============================================================
   AETHER LIQUID GLASS DESIGN SYSTEM
   Physics-Based Glass Rendering (macOS Tahoe Inspired)
   ============================================================ */

/* ============================================================
   SECTION 1: GLASS PHYSICS VARIABLES
   ============================================================ */

:root {
    /* === TYPOGRAPHY (Apple-clean) === */
    --font-ui: -apple-system, BlinkMacSystemFont, 'SF Pro', 'Manrope', system-ui, sans-serif;
    --font-mono: 'SF Mono', 'JetBrains Mono', monospace;
    --font-weight-heading: 700;
    --font-weight-body: 400;
    --letter-heading: -0.02em;
    --letter-body: 0;

    /* === AETHER ACCENT (Purple, Apple-subtle application) === */
    --p: #8b5cf6;
    --p-light: #a78bfa;
    --p-dark: #7c3aed;
    --p-glow: 0 0 12px rgba(139, 92, 246, 0.3);
    --success: #34c759;
    --warning: #ff9f0a;
    --danger: #ff453a;

    /* === GEOMETRY (Liquid Glass Scale) === */
    --radius-xs: 4px;
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-control: 12px;
    --radius-window: 20px;
    --radius-card: 16px;
    --radius-btn: 8px;
    --radius-input: 8px;
    --radius: 16px;
    --radius-full: 9999px;

    /* === SPACING (Apple 4px grid) === */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;

    /* === RIM LIGHTING (Subtle but Present) === */
    --rim-light:
        inset 0 1px 0 0 rgba(255, 255, 255, 0.15),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.08);
    --rim-light-strong:
        inset 0 1px 0 0 rgba(255, 255, 255, 0.25),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.12);

    /* === SURFACE EFFECTS (Subtle Physics) === */
    --surface-shine: linear-gradient(135deg,
            rgba(255, 255, 255, 0.12) 0%,
            rgba(255, 255, 255, 0.04) 40%,
            transparent 70%);
    --fresnel-mask: radial-gradient(ellipse at center,
            transparent 50%,
            rgba(255, 255, 255, 0.06) 100%);

    /* === TRUE GLASS (macOS Tahoe Values) === */
    --glass-blur: 40px;
    --glass-blur-light: 20px;
    --glass-blur-heavy: 60px;
    --glass-saturate: 180%;

    /* === DARK THEME (Apple Gray) === */
    --bg: #1c1c1e;
    --bg-gradient: #1c1c1e;
    --sb: rgba(44, 44, 46, 0.8);

    /* Glass Backgrounds (Tahoe spec: 0.08 base) */
    --glass-bg: rgba(255, 255, 255, 0.08);
    --glass-bg-hover: rgba(255, 255, 255, 0.12);
    --glass-bg-active: rgba(255, 255, 255, 0.15);
    --glass-bg-elevated: rgba(255, 255, 255, 0.12);
    --glass-bg-inset: rgba(0, 0, 0, 0.2);
    --glass-gradient: rgba(255, 255, 255, 0.04);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-border-light: rgba(255, 255, 255, 0.12);
    --glass-border-top: rgba(255, 255, 255, 0.15);
    --glass-border-bottom: rgba(255, 255, 255, 0.05);
    --glass-hover: rgba(255, 255, 255, 0.12);

    /* Buttons (Tahoe spec: 0.18 primary) */
    --glass-btn: rgba(255, 255, 255, 0.18);
    --glass-btn-hover: rgba(255, 255, 255, 0.25);
    --glass-btn-text: #ffffff;

    /* Text (Apple white hierarchy: 90%, 60%, 40%) */
    --txt: rgba(255, 255, 255, 0.9);
    --txt-secondary: rgba(255, 255, 255, 0.6);
    --muted: rgba(255, 255, 255, 0.4);

    /* Inputs (Carved inset look) */
    --input-bg: rgba(0, 0, 0, 0.2);
    --input-border: rgba(255, 255, 255, 0.08);
    --input-groove: inset 0 1px 2px rgba(0, 0, 0, 0.25);
    --input-focus-glow: 0 0 0 3px rgba(255, 255, 255, 0.1);

    /* Console */
    --console-bg: rgba(0, 0, 0, 0.35);
    --console-border: rgba(255, 255, 255, 0.06);

    /* Shadows (Soft, multi-layer per Tahoe) */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
    --shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.16);
    --shadow-float: 0 12px 40px rgba(0, 0, 0, 0.2);
    --modal-shadow: 0 24px 80px rgba(0, 0, 0, 0.4);
    --modal-bg: rgba(40, 20, 25, 0.75);

    /* === GLASS SPHERE (Toggle) - Subtle Specular === */
    --sphere-highlight: radial-gradient(ellipse at 30% 25%,
            rgba(255, 255, 255, 0.6) 0%,
            rgba(255, 255, 255, 0.25) 30%,
            transparent 60%);
    --sphere-body: linear-gradient(145deg, #ffffff 0%, #e8e8ed 100%);

    /* === PHYSICS MOTION (Apple-Quality Springs) === */
    --spring-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --spring-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --spring-snappy: cubic-bezier(0.2, 0.8, 0.2, 1);

    /* Hover/Press Transforms */
    --hover-lift: translateY(-3px) scale(1.02);
    --hover-lift-subtle: translateY(-2px);
    --press-depth: translateY(1px) scale(0.98);
    --icon-bounce-scale: 1.15;
}

/* === PHYSICS KEYFRAME ANIMATIONS === */
@keyframes glowPulse {

    0%,
    100% {
        box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
    }

    50% {
        box-shadow: 0 0 25px rgba(139, 92, 246, 0.5);
    }
}

@keyframes iconBounce {

    0%,
    100% {
        transform: scale(1);
    }

    40% {
        transform: scale(1.2);
    }

    60% {
        transform: scale(0.95);
    }

    80% {
        transform: scale(1.05);
    }
}

@keyframes glowBreath {

    0%,
    100% {
        opacity: 0.7;
    }

    50% {
        opacity: 1;
    }
}

@keyframes tooltipEnter {
    0% {
        opacity: 0;
        transform: translateX(-50%) translateY(-5px) scale(0.95);
    }

    100% {
        opacity: 1;
        transform: translateX(-50%) translateY(-10px) scale(1);
    }
}

@keyframes floatSubtle {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-4px);
    }
}

@keyframes shineSlide {
    0% {
        background-position: -200% center;
    }

    100% {
        background-position: 200% center;
    }
}

/* ============================================================
   SECTION 2: RANGE SLIDER OVERRIDES
   ============================================================ */
#blur-slider,
input[type="range"] {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}

/* === LIGHT THEME (Aerogel White) === */
[data-theme="light"] {
    --bg: #F0F2F5;
    --bg-gradient: radial-gradient(ellipse at 50% 0%, rgba(139, 92, 246, 0.05) 0%, transparent 60%), #F0F2F5;
    --sb: rgba(255, 255, 255, 0.8);

    --glass-gradient: linear-gradient(145deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
    --glass-border-top: rgba(255, 255, 255, 0.95);
    --glass-border-bottom: rgba(0, 0, 0, 0.04);
    --glass-hover: rgba(255, 255, 255, 0.98);
    --rim-light: inset 0 1px 0 0 rgba(255, 255, 255, 1), inset 0 0 0 1px rgba(0, 0, 0, 0.03);

    --glass-btn: rgba(255, 255, 255, 0.8);
    --glass-btn-hover: rgba(255, 255, 255, 0.95);
    --glass-btn-text: #1d1d1f;

    --txt: rgba(0, 0, 0, 0.9);
    --txt-secondary: rgba(0, 0, 0, 0.7);
    --muted: rgba(0, 0, 0, 0.5);

    --console-bg: rgba(255, 255, 255, 0.9);
    --console-border: rgba(0, 0, 0, 0.06);
    --input-bg: rgba(255, 255, 255, 0.95);
    --input-border: rgba(0, 0, 0, 0.08);
    --input-groove: inset 0 2px 4px rgba(0, 0, 0, 0.08), inset 0 0 0 1px rgba(0, 0, 0, 0.05);

    --modal-bg: rgba(255, 255, 255, 0.95);
    --shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    --shadow-hover: 0 10px 40px rgba(0, 0, 0, 0.1);
}

/* === AMOLED THEME (Pure Black + Neon Edges) === */
[data-theme="amoled"] {
    --bg: #000000;
    --bg-gradient: #000000;
    --sb: #000000;

    /* Disable glass blur for OLED performance */
    --glass-blur: 0px;
    --glass-blur-thin: 0px;
    --glass-saturate: 100%;
    --glass-gradient: rgba(10, 10, 10, 0.95);

    /* Neon purple edges for hierarchy */
    --glass-border-top: rgba(139, 92, 246, 0.35);
    --glass-border-bottom: rgba(139, 92, 246, 0.15);
    --glass-hover: rgba(20, 20, 20, 0.95);
    --rim-light: inset 0 1px 0 0 rgba(139, 92, 246, 0.3), inset 0 0 0 1px rgba(139, 92, 246, 0.1);

    --glass-btn: rgba(15, 15, 15, 0.95);
    --glass-btn-hover: rgba(30, 30, 30, 0.95);
    --glass-btn-text: #ffffff;

    --txt: rgba(255, 255, 255, 0.95);
    --txt-secondary: rgba(255, 255, 255, 0.7);
    --muted: rgba(255, 255, 255, 0.55);

    --console-bg: #000000;
    --console-border: rgba(139, 92, 246, 0.25);
    --input-bg: rgba(15, 15, 15, 0.95);
    --input-border: rgba(139, 92, 246, 0.35);
    --input-groove: inset 0 2px 4px rgba(0, 0, 0, 0.9), inset 0 0 0 1px rgba(139, 92, 246, 0.15);

    --modal-bg: #000000;
    --shadow: 0 0 20px rgba(139, 92, 246, 0.15);
    --shadow-hover: 0 0 35px rgba(139, 92, 246, 0.25);
    --modal-shadow: 0 8px 40px rgba(139, 92, 246, 0.35);
}

/* AMOLED + FLAT - Make it distinct from Dark + Flat */
[data-design="material"][data-theme="amoled"] {
    --bg: #000000;
    --sb: #000000;
    --glass-gradient: #0d0d0d;

    --glass-border-top: rgba(138, 92, 246, 0.4);
    --glass-border-bottom: rgba(138, 92, 246, 0.2);
    --glass-hover: #1a1a1a;

    --glass-btn: #141414;
    --glass-btn-hover: #242424;
    --glass-btn-text: #ffffff;

    --txt: #ffffff;
    --muted: #d0d0d0;
    --input-bg: #141414;
    --input-border: rgba(138, 92, 246, 0.4);

    /* Distinct AMOLED elevation with purple glow */
    --shadow: 0 0 15px rgba(138, 92, 246, 0.2), 0 2px 8px rgba(0, 0, 0, 0.9);
    --shadow-hover: 0 0 25px rgba(138, 92, 246, 0.3), 0 4px 12px rgba(0, 0, 0, 0.9);
    --modal-bg: #000000;
    --modal-shadow: 0 0 40px rgba(138, 92, 246, 0.4), 0 8px 24px rgba(0, 0, 0, 1);
}

/* --- MATERIAL DESIGN 3 (FLAT) --- */
[data-design="material"] {
    --glass-blur: 0px;
    --glass-saturate: 100%;
    --radius: 12px;

    /* DARK MATERIAL */
    --bg: #1c1b1f;
    --sb: #1c1b1f;
    --glass-gradient: #2b2930;

    --glass-border-top: #3e3d42;
    --glass-border-bottom: #3e3d42;
    --glass-hover: #36343b;

    --glass-btn: #36343b;
    --glass-btn-hover: #4a4458;
    --glass-btn-text: #e6e0e9;

    --txt: #e6e0e9;
    --muted: #cac4d0;
    --input-bg: #36343b;
    --input-border: #79747e;

    /* Material Design 3 Elevation */
    --shadow: 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px 3px 1px rgba(0, 0, 0, 0.15);
    --shadow-hover: 0 1px 2px rgba(0, 0, 0, 0.3), 0 2px 6px 2px rgba(0, 0, 0, 0.15);
    --modal-bg: #2b2930;
    --modal-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 6px 12px 4px rgba(0, 0, 0, 0.15);
}

/* LIGHT MATERIAL (Material Design 3) */
[data-design="material"][data-theme="light"] {
    --bg: #fef7ff;
    --sb: #fef7ff;
    --glass-gradient: #fffbfe;

    --glass-border-top: #e7e0ec;
    --glass-border-bottom: #e7e0ec;
    --glass-hover: #f3edf7;

    --glass-btn: #f3edf7;
    --glass-btn-hover: #e7e0ec;
    --glass-btn-text: #1c1b1f;

    --txt: #1c1b1f;
    --muted: #49454f;
    --input-bg: #f3edf7;
    --input-border: #79747e;

    --console-bg: #fffbfe;
    --console-border: #e7e0ec;

    /* Material Design 3 Elevation - Light */
    --shadow: 0 1px 2px rgba(0, 0, 0, 0.08), 0 1px 3px 1px rgba(0, 0, 0, 0.06);
    --shadow-hover: 0 1px 2px rgba(0, 0, 0, 0.08), 0 2px 6px 2px rgba(0, 0, 0, 0.06);
    --modal-bg: #fffbfe;
    --modal-shadow: 0 4px 8px rgba(0, 0, 0, 0.08), 0 6px 12px 4px rgba(0, 0, 0, 0.06);
}

/* --- SCROLLBARS (Cross-Browser) --- */
html {
    scrollbar-width: thin;
    scrollbar-color: rgba(128, 128, 128, 0.3) transparent;
}

::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.3);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--p);
}

/* --- SELECCIÓN DE TEXTO --- */
::selection {
    background: var(--p);
    color: white;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    outline: none;
    -webkit-font-smoothing: antialiased;
}

/* --- FOCUS ACCESIBLE --- */
:focus-visible {
    outline: 2px solid var(--p);
    outline-offset: 2px;
}

#blur-slider,
input[type="range"] {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    /* background: linear-gradient() REMOVED */
}

body {
    font-family: var(--font-ui);
    font-weight: var(--font-weight-body);
    letter-spacing: var(--letter-body);
    background: var(--bg-gradient);
    background-color: var(--bg);
    color: var(--txt);
    height: 100vh;
    overflow: hidden;
    transition: background 0.3s ease, color 0.3s ease;
    position: relative;
}

/* LUCES DE FONDO */
/* LUCES DE FONDO REMOVED */
body::before,
body::after {
    display: none !important;
}

[data-design="material"] body::before,
[data-design="material"] body::after {
    display: none;
}

body::before {
    background: var(--p);
    top: -150px;
    left: -150px;
}

body::after {

    content: '';

    position: fixed;

    top: 0;

    left: 0;

    width: 100%;

    height: 100%;

    opacity: 0.04;

    z-index: 1;

    pointer-events: none;

    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIGJhc2VGcmVxdWVuY3k9Ii43NSIgc3RpdGNoVGlsZXM9InN0aXRjaCIgdHlwZT0iZnJhY3RhbE5vaXNlIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGQ9Ik0wIDBoMzAwdjMwMEgweiIgZmlsdGVyPSJ1cmwoI2EpIiBvcGFjaXR5PSIuMDUiLz48L3N2Zz4=');

}

@keyframes floatBlob {
    0% {
        transform: translate(0, 0) scale(1);
    }

    100% {
        transform: translate(100px, 50px) scale(1.1);
    }
}

/* ============================================================
   SECTION 3: GLASS SURFACE (Physics-Based)
   ============================================================ */

/* Base Glass Material with Physics */
.glass {
    position: relative;
    background: var(--glass-gradient);
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    border: 1px solid var(--glass-border-top);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow), var(--rim-light);
    transition: all 0.25s ease;
    overflow: hidden;
}

/* Surface Shine (Top-left specular) */
.glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--surface-shine);
    pointer-events: none;
    border-radius: inherit;
}

/* Fresnel Edge Effect (Edge reflectivity) */
.glass::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--fresnel-mask);
    pointer-events: none;
    border-radius: inherit;
    opacity: 0.7;
}

.glass:hover {
    background: var(--glass-hover);
    box-shadow: var(--shadow-hover), var(--rim-light-strong);
}

/* Fallback */
@supports not (backdrop-filter: blur(1px)) {
    .glass {
        background: var(--modal-bg);
    }

    .glass::before,
    .glass::after {
        display: none;
    }
}

[data-theme="light"] .glass {
    background: rgba(255, 255, 255, 0.7);
    border-color: rgba(255, 255, 255, 0.5);
    box-shadow: var(--shadow), inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

[data-theme="amoled"] .glass {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(0, 0, 0, 0.9);
    border-color: rgba(139, 92, 246, 0.25);
}

[data-theme="amoled"] .glass::before,
[data-theme="amoled"] .glass::after {
    display: none;
}

[data-design="material"] .glass {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: var(--modal-bg);
    box-shadow: var(--shadow);
}

[data-design="material"] .glass::before,
[data-design="material"] .glass::after {
    display: none;
}

.app-layout {
    display: flex;
    height: 100%;
    position: relative;
    z-index: 10;
}

/* === BUTTONS (Physics-Enhanced) === */
.btn {
    padding: 12px 24px;
    border-radius: var(--radius-btn);
    border: none;
    cursor: pointer;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.25s var(--spring-bounce);
    font-size: 0.9rem;
    text-decoration: none;
    font-family: inherit;
    letter-spacing: 0.02em;
    position: relative;
    overflow: hidden;
}

.btn:hover {
    transform: var(--hover-lift-subtle);
}

.btn:active {
    transform: var(--press-depth);
    transition-duration: 0.1s;
}

.btn-primary {
    background: linear-gradient(135deg, var(--p), var(--p-dark));
    color: white;
    box-shadow: var(--p-glow), var(--rim-light);
    border: 1px solid rgba(255, 255, 255, 0.15);
}

/* Surface shine overlay */
.btn-primary::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--surface-shine);
    pointer-events: none;
    border-radius: inherit;
    opacity: 0.8;
}

[data-design="material"] .btn-primary {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border: none;
}

[data-design="material"] .btn-primary::before {
    display: none;
}

.btn-primary:hover {
    transform: var(--hover-lift);
    box-shadow: 0 0 30px rgba(139, 92, 246, 0.6), var(--rim-light-strong);
}

.btn-secondary {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border-light);
    color: var(--txt);
    backdrop-filter: blur(20px);
    box-shadow: var(--rim-light);
}

[data-design="material"] .btn-secondary {
    backdrop-filter: none;
}

.btn-secondary:hover {
    background: var(--glass-bg-hover);
    border-color: rgba(255, 255, 255, 0.2);
}

.btn-ghost {
    background: transparent;
    color: var(--txt-secondary);
    border: none;
}

.btn-ghost:hover {
    background: var(--glass-bg);
    color: var(--txt);
}

/* === SIDEBAR (Liquid Glass Layer) === */
.sidebar {
    width: 270px;
    background: rgba(255, 255, 255, 0.05);
    border-right: 1px solid var(--glass-border);
    padding: 24px 20px;
    display: flex;
    flex-direction: column;
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    z-index: 20;
    transition: width 0.3s ease, padding 0.3s ease;
    flex-shrink: 0;
}

[data-design="material"] .sidebar {
    backdrop-filter: none;
    background: var(--sb);
}

/* SIDEBAR COLLAPSED */
.sidebar.collapsed {
    width: 80px;
    padding: 24px 10px;
}

.sidebar.collapsed .brand-name,
.sidebar.collapsed .version-badge,
.sidebar.collapsed .nav-label,
.sidebar.collapsed .nav-btn span,
.sidebar.collapsed .sidebar-btn span,
.sidebar.collapsed .account-info span,
.sidebar.collapsed .account-chevron,
.sidebar.collapsed #status-text {
    display: none;
    opacity: 0;
}

.sidebar.collapsed .brand {
    justify-content: center;
    padding: 8px 0;
}

.sidebar.collapsed .nav-btn {
    justify-content: center;
    padding: 12px;
}

.sidebar.collapsed .nav-btn i {
    font-size: 1.2rem;
    margin: 0;
}

.sidebar.collapsed .sidebar-footer {
    align-items: center;
}

.sidebar.collapsed .account-logout-row {
    flex-direction: column;
    gap: 10px;
    width: 100%;
    align-items: center;
}

.sidebar.collapsed .account-section {
    width: 100%;
}

.sidebar.collapsed .account-trigger {
    padding: 0;
    justify-content: center;
    width: 40px;
    height: 40px;
    margin: 0 auto;
}

.sidebar.collapsed .account-info {
    margin: 0;
}

.sidebar.collapsed .account-info i {
    font-size: 1.5rem;
}

.sidebar.collapsed .logout-btn {
    width: 40px;
    height: 40px;
    padding: 0;
    justify-content: center;
}

.sidebar.collapsed .status-widget {
    padding: 10px;
    justify-content: center;
}

.brand {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 60px;
    padding: 8px 12px;
}

.brand-logo {
    width: 38px;
    height: 38px;
    background: linear-gradient(135deg, var(--p), var(--p-dark));
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
    flex-shrink: 0;
}

[data-design="material"] .brand-logo {
    box-shadow: none;
}

.brand-name {
    font-weight: 800;
    font-size: 1.2rem;
    letter-spacing: 1px;
    color: var(--txt);
    white-space: nowrap;
}

.version-badge {
    font-size: 0.75rem;
    color: var(--muted);
    font-weight: 600;
    font-family: 'JetBrains Mono', monospace;
    background: rgba(128, 128, 128, 0.15);
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-left: auto;
}

[data-design="material"] .version-badge {
    border: none;
}

nav {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    overflow-x: hidden;
}

.nav-label {
    font-size: 0.7rem;
    color: var(--muted);
    font-weight: 800;
    margin: 24px 0 10px 14px;
    text-transform: uppercase;
    letter-spacing: 2px;
    opacity: 0.7;
    white-space: nowrap;
}

.nav-btn {
    width: 100%;
    background: transparent;
    border: 1px solid transparent;
    padding: 12px 16px;
    color: var(--muted);
    text-align: left;
    border-radius: 16px;
    cursor: pointer;
    font-family: inherit;
    font-weight: 600;
    font-size: 0.95rem;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.25s var(--spring-bounce);
    white-space: nowrap;
}

[data-design="material"] .nav-btn {
    border-radius: 8px;
}

.nav-btn:hover {
    background: var(--glass-hover);
    color: var(--txt);
    transform: translateX(5px);
}

.nav-btn:hover i {
    color: var(--p);
    animation: iconBounce 0.4s var(--spring-bounce);
}

.nav-btn.active {
    background: linear-gradient(145deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.08) 100%);
    color: var(--txt);
    border: 1px solid rgba(139, 92, 246, 0.6);
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.35),
        var(--rim-light-strong),
        inset 0 0 20px rgba(139, 92, 246, 0.1);
    animation: glowPulse 3s infinite ease-in-out;
}

.nav-btn.active i {
    color: var(--p);
    text-shadow: 0 0 12px var(--p);
    filter: drop-shadow(0 0 6px var(--p));
}

[data-design="material"] .nav-btn.active,
[data-theme="light"] .nav-btn.active {
    background: var(--glass-hover);
    border: 1px solid var(--glass-border);
    box-shadow: none;
    text-shadow: none;
}

[data-design="material"] .nav-btn.active i,
[data-theme="light"] .nav-btn.active i {
    text-shadow: none;
}

.sidebar-footer {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 14px;
    padding-top: 20px;
    border-top: 1px solid var(--glass-border);
}

.sidebar-btn {
    width: 100%;
    justify-content: center;
    margin-bottom: 10px;
}

.logout-btn {
    color: var(--danger);
    border-color: rgba(239, 68, 68, 0.3);
}


.status-widget {
    background: rgba(0, 0, 0, 0.4);
    padding: 12px 16px;
    border-radius: var(--radius-btn);
    border: 1px solid var(--glass-border-bottom);
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    font-size: 0.85rem;
    color: var(--txt);
    white-space: nowrap;
    overflow: hidden;
    backdrop-filter: blur(10px);
    box-shadow: var(--rim-light);
    border-radius: 18px;
}

.status-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--danger);
    transition: all 0.3s;
    flex-shrink: 0;
    box-shadow: 0 0 10px var(--danger);
}

.ONLINE .status-indicator {
    background: var(--success);
    box-shadow: 0 0 10px var(--success);
    animation: pulse 2s infinite;
}

[data-design="material"] .status-widget,
[data-theme="light"] .status-widget {
    background: var(--glass-btn);
    backdrop-filter: none;
}

[data-design="material"] .status-indicator,
[data-theme="light"] .status-indicator {
    box-shadow: none;
}

@keyframes pulse {
    0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
    }

    70% {
        transform: scale(1);
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
    }

    100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
    }
}

/* MAIN CONTENT */
main {
    flex: 1;
    padding: 40px 50px;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    scroll-behavior: smooth;
    position: relative;
    min-width: 0;
}

/* HEADER */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 60px;
    transition: opacity 0.3s;
    flex-wrap: wrap;
    gap: 20px;
}

.server-title h1 {
    font-size: 2.2rem;
    font-weight: var(--font-weight-heading);
    letter-spacing: var(--letter-heading);
    margin-bottom: 6px;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
}

[data-design="material"] .server-title h1,
[data-theme="light"] .server-title h1 {
    text-shadow: none;
}

.server-ip-box {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid var(--glass-border);
    padding: 8px 16px;
    border-radius: 50px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--p-light);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.2s;
    backdrop-filter: blur(10px);
}

[data-design="material"] .server-ip-box,
[data-theme="light"] .server-ip-box {
    background: var(--glass-btn);
    backdrop-filter: none;
    color: var(--p);
}

.server-ip-box:hover {
    border-color: var(--p);
    background: rgba(139, 92, 246, 0.1);
    transform: translateY(-2px);
}

/* HEADER ACTIONS */
.actions {
    display: flex;
    gap: 12px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.btn-control {
    width: 50px;
    height: 50px;
    border-radius: 18px;
    border: none;
    color: white;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.btn-control:hover {
    transform: scale(1.15) rotate(5deg);
    filter: brightness(1.2);
}

.start {
    background: linear-gradient(135deg, var(--success), #059669);
    box-shadow: 0 5px 20px rgba(16, 185, 129, 0.5), 0 0 40px rgba(16, 185, 129, 0.2), var(--rim-light);
}

.restart {
    background: linear-gradient(135deg, var(--warning), #d97706);
    box-shadow: 0 5px 20px rgba(245, 158, 11, 0.5), 0 0 40px rgba(245, 158, 11, 0.2), var(--rim-light);
}

.stop {
    background: linear-gradient(135deg, var(--danger), #b91c1c);
    box-shadow: 0 5px 20px rgba(239, 68, 68, 0.5), 0 0 40px rgba(239, 68, 68, 0.2), var(--rim-light);
}

.kill {
    background: linear-gradient(135deg, #27272a, #18181b);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6), var(--rim-light);
}

[data-design="material"] .btn-control {
    border: none;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
    border-radius: 12px;
}

/* MONITOR POWER CARD */
.power-card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.power-btn-large {
    padding: 16px;
    border-radius: var(--radius);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: 700;
    transition: all 0.3s var(--spring-bounce);
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), var(--rim-light);
}

[data-design="material"] .power-btn-large {
    border: none;
    backdrop-filter: none;
}

.power-btn-large i {
    font-size: 1.5rem;
    transition: transform 0.3s var(--spring-bounce);
}

.power-btn-large:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5), var(--rim-light-strong);
}

.power-btn-large:hover i {
    transform: scale(1.15);
}

.power-btn-large:active {
    transform: translateY(-2px) scale(0.98);
    transition-duration: 0.1s;
}

/* --- CARDS & GRIDS --- */
.versions-container,
.labs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 24px;
    margin-top: 20px;
}

/* Tarjetas (Physics Cards) */
.mod-card-modern,
.version-card {
    background: var(--glass-gradient);
    backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border-top);
    border-radius: var(--radius-card);
    padding: 0;
    display: flex;
    flex-direction: column;
    transition: all 0.35s var(--spring-bounce);
    cursor: pointer;
    overflow: hidden;
    position: relative;
    min-height: 240px;
    box-shadow: var(--shadow), var(--rim-light);
}

/* Surface shine on cards */
.mod-card-modern::before,
.version-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--surface-shine);
    pointer-events: none;
    z-index: 1;
    opacity: 0.5;
    transition: opacity 0.3s ease;
}

.mod-card-modern:hover::before,
.version-card:hover::before {
    opacity: 0.8;
}

[data-design="material"] .mod-card-modern,
[data-design="material"] .version-card {
    backdrop-filter: none;
    box-shadow: var(--shadow);
}

[data-design="material"] .mod-card-modern::before,
[data-design="material"] .version-card::before {
    display: none;
}

[data-theme="light"] .mod-card-modern,
[data-theme="light"] .version-card {
    box-shadow: var(--shadow);
}

.mod-card-modern:hover,
.version-card:hover {
    transform: translateY(-10px) scale(1.01);
    border-color: var(--p);
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4), var(--rim-light-strong);
}

/* Cabecera Color */
.mod-cover {
    height: 120px;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    position: relative;
    background-image: radial-gradient(rgba(255, 255, 255, 0.2) 1px, transparent 1px);
    background-size: 10px 10px;
}

.mod-cover i {
    font-size: 3.5rem;
    filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.3));
    z-index: 2;
    transition: transform 0.3s;
}

.mod-card-modern:hover .mod-cover i {
    transform: scale(1.1) rotate(-5deg);
}

/* GRADIENTES (!IMPORTANT) */
.mod-card-modern.vanilla .mod-cover,
.version-card.vanilla .mod-cover {
    background-color: #10b981 !important;
    background-image: linear-gradient(135deg, #10b981, #047857) !important;
}

.mod-card-modern.paper .mod-cover,
.version-card.paper .mod-cover {
    background-color: #3b82f6 !important;
    background-image: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
}

.mod-card-modern.fabric .mod-cover,
.version-card.fabric .mod-cover {
    background-color: #f59e0b !important;
    background-image: linear-gradient(135deg, #f59e0b, #b45309) !important;
}

.mod-card-modern.forge .mod-cover,
.version-card.forge .mod-cover {
    background-color: #ef4444 !important;
    background-image: linear-gradient(135deg, #ef4444, #b91c1c) !important;
}

.lab-purple .mod-cover {
    background-image: linear-gradient(135deg, #8b5cf6, #6d28d9) !important;
}

.lab-teal .mod-cover {
    background-image: linear-gradient(135deg, #14b8a6, #0f766e) !important;
}

.lab-orange .mod-cover {
    background-image: linear-gradient(135deg, #f97316, #c2410c) !important;
}

.lab-blue .mod-cover {
    background-image: linear-gradient(135deg, #0ea5e9, #0369a1) !important;
}

.lab-red .mod-cover {
    background-image: linear-gradient(135deg, #ef4444, #991b1b) !important;
}

.lab-indigo .mod-cover {
    background-image: linear-gradient(135deg, #6366f1, #312e81) !important;
}

/* LAB TAGS (BUBBLES) */
.lab-tag {
    position: absolute;
    top: 12px;
    right: 12px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.65rem;
    font-weight: 800;
    letter-spacing: 1px;
    color: white;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    z-index: 10;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    text-transform: uppercase;
}

.lab-tag.alpha {
    background: rgba(249, 115, 22, 0.6);
}

/* Orange */
.lab-tag.beta {
    background: rgba(59, 130, 246, 0.6);
}

/* Blue */
.lab-tag.new {
    background: rgba(16, 185, 129, 0.6);
}

/* Green */
.lab-tag.wip {
    background: rgba(100, 116, 139, 0.6);
}

/* Gray */

.mod-body {
    padding: 24px;
    flex: 1;
    display: flex;
    flex-direction: column;
    background: rgba(0, 0, 0, 0.2);
}

[data-design="material"] .mod-body,
[data-theme="light"] .mod-body {
    background: transparent;
}

.mod-title {
    font-weight: 800;
    font-size: 1.2rem;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

[data-design="material"] .mod-title,
[data-theme="light"] .mod-title {
    text-shadow: none;
}

.mod-desc {
    font-size: 0.9rem;
    color: var(--muted);
    line-height: 1.6;
    margin-bottom: 20px;
    flex: 1;
}

/* BOTÓN INSTALAR */
.btn-install {
    width: 100%;
    margin-top: auto;
    padding: 12px;
    background: rgba(255, 255, 255, 0.1);
    color: var(--txt);
    border: 1px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(5px);
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: 'Manrope', sans-serif;
    font-size: 0.9rem;
}

[data-design="material"] .btn-install,
[data-theme="light"] .btn-install {
    background: var(--glass-btn);
    border: 1px solid var(--glass-border);
    backdrop-filter: none;
}

.btn-install:hover {
    background: white;
    color: black;
    border-color: white;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
}

[data-design="material"] .btn-install:hover,
[data-theme="light"] .btn-install:hover {
    background: var(--p);
    color: white;
    border-color: var(--p);
    box-shadow: none;
}

/* TERMINAL */
.console-box {
    height: calc(100vh - 220px);
    min-height: 300px;
    background: var(--console-bg);
    border: 1px solid var(--console-border);
    border-radius: var(--radius);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    font-family: 'JetBrains Mono', monospace;
    backdrop-filter: blur(10px);
}

[data-design="material"] .console-box {
    backdrop-filter: none;
}

.console-header {
    background: rgba(255, 255, 255, 0.03);
    padding: 10px 18px;
    border-bottom: 1px solid var(--console-border);
    display: flex;
    gap: 10px;
    align-items: center;
}

.dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.dot.red {
    background: #ff5f56;
    box-shadow: 0 0 5px #ff5f56;
}

.dot.yellow {
    background: #ffbd2e;
    box-shadow: 0 0 5px #ffbd2e;
}

.dot.green {
    background: #27c93f;
    box-shadow: 0 0 5px #27c93f;
}

#terminal {
    flex: 1;
    padding: 12px;
    overflow: hidden;
    position: relative;
}

.console-input-area {
    background: rgba(0, 0, 0, 0.3);
    padding: 12px 16px;
    display: flex;
    gap: 12px;
    align-items: center;
    border-top: 1px solid var(--console-border);
}

#console-input {
    background: transparent;
    border: none;
    color: white;
    flex: 1;
    outline: none;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.95rem;
}

[data-theme="light"] #console-input {
    color: #1f2937;
}

/* MODALS */
.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(20px);
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.modal {
    width: 85%;
    max-width: 900px;
    max-height: 90vh;
    border: 1px solid var(--glass-border);
    background: var(--modal-bg);
    border-radius: var(--radius);
    display: flex;
    flex-direction: column;
    box-shadow: var(--modal-shadow);
    overflow: hidden;
    backdrop-filter: blur(50px) saturate(200%);
}

[data-design="material"] .modal {
    backdrop-filter: none;
}

.modal-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--glass-border-bottom);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    background: rgba(255, 255, 255, 0.02);
    box-shadow: var(--rim-light);
}

.modal-small {
    height: auto;
    max-width: 450px;
}

/* === LOGIN SCREEN STYLES === */
.login-screen {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 10000;
    background: var(--bg);
}

.login-box {
    max-width: 360px;
    width: 90%;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
}

.login-header {
    margin-bottom: 30px;
}

.brand-logo-login {
    margin: 0 auto 15px auto;
    width: 60px;
    height: 60px;
}

.login-title {
    font-weight: 800;
    font-size: 1.5rem;
    margin-bottom: 5px;
}

.login-subtitle {
    color: var(--muted);
    font-size: 0.9rem;
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.login-btn-submit {
    width: 100%;
    justify-content: center;
    margin-top: 10px;
}

.login-error {
    margin-top: 20px;
    text-align: center;
    color: var(--danger);
    font-size: 0.85rem;
    display: none;
    background: rgba(239, 68, 68, 0.1);
    padding: 10px;
    border-radius: 8px;
}

/* === MODAL CONTENT LAYOUTS === */
.modal-content-grid {
    padding: 24px;
    overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 16px;
}

.modal-content-custom {
    padding: 0;
    max-height: 80vh;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Custom scrollbar for modal */
.modal-content-custom::-webkit-scrollbar {
    width: 6px;
}

.modal-content-custom::-webkit-scrollbar-track {
    background: transparent;
}

.modal-content-custom::-webkit-scrollbar-thumb {
    background: var(--p);
    border-radius: 3px;
}

.modal-content-custom::-webkit-scrollbar-thumb:hover {
    background: var(--p-dark);
}

.modal-header-custom {
    border: none;
    padding: 20px 24px;
}

.ram-modal-content {
    padding: 30px;
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.ram-display-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.ram-label {
    font-weight: 700;
}

.ram-value {
    font-family: 'JetBrains Mono', monospace;
    color: var(--p);
    font-size: 1.2rem;
    font-weight: bold;
}

.ram-slider {
    width: 100%;
}

.ram-confirm-btn {
    width: 100%;
}


/* CARDS */
.card {
    padding: 32px;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    height: auto;
    min-height: 200px;
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
}

.card.full {
    min-height: 500px;
}

.card-title {
    font-size: 0.85rem;
    font-weight: 800;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    letter-spacing: 2px;
}

.stat-big {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--txt);
    line-height: 1;
    margin-bottom: 5px;
    text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

[data-design="material"] .stat-big,
[data-theme="light"] .stat-big {
    text-shadow: none;
}

.chart-mini {
    height: 140px;
    width: 100%;
    margin-top: auto;
    opacity: 0.8;
    mask-image: linear-gradient(to bottom, black, transparent);
    -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
}

/* --- ESTILOS DE AJUSTES --- */
.cfg-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
    padding-bottom: 20px;
}

.cfg-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.cfg-label {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--muted);
    margin-left: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ============================================================
   SECTION 4: CARVED INPUT FIELDS (Slot Appearance)
   Per research: milled into glass, dark shadow top, light bottom,
   focus = soft halo glow, not hard outline
   ============================================================ */
.cfg-in {
    width: 100%;
    padding: 14px 18px;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-input);
    color: var(--txt);
    outline: none;
    box-shadow: var(--input-groove);
    transition: all 0.3s ease;
    font-family: var(--font-mono);
    font-size: 0.9rem;
}

/* Focus: Soft blue halo/aura (not hard outline) */
.cfg-in:focus {
    border-color: rgba(139, 92, 246, 0.6);
    box-shadow: var(--input-focus-glow), var(--input-groove);
}

[data-design="material"] .cfg-in:focus,
[data-theme="light"] .cfg-in:focus {
    box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
}

/* ============================================================
   TOGGLE SWITCH (Glass Sphere Physics)
   ============================================================ */
.switch {
    position: relative;
    display: inline-block;
    width: 51px;
    height: 31px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

/* Track - Recessed channel */
.slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background: rgba(120, 120, 128, 0.32);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2), var(--rim-light);
    border-radius: 16px;
    transition: all 0.25s ease;
}

/* Knob - Glass sphere with gradient */
.slider:before {
    position: absolute;
    content: "";
    height: 27px;
    width: 27px;
    left: 2px;
    bottom: 2px;
    background: var(--sphere-body);
    border-radius: 50%;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.15);
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Specular Highlight on Knob */
.slider:after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    left: 5px;
    bottom: 5px;
    background: var(--sphere-highlight);
    border-radius: 50%;
    pointer-events: none;
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Active State - With Glow */
input:checked+.slider {
    background: var(--success);
    box-shadow: 0 0 12px rgba(52, 199, 89, 0.4);
}

input:checked+.slider:before {
    transform: translateX(20px);
}

input:checked+.slider:after {
    transform: translateX(20px);
}

/* Light Theme */
[data-theme="light"] .slider {
    background: rgba(120, 120, 128, 0.16);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.tab-content {
    display: none;
    height: 100%;
}

.tab-content.active {
    display: flex;
    flex-direction: column;
    animation: slideUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
}

#tab-stats.active {
    display: block;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 24px;
    margin-top: 20px;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: scale(0.98);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.bg-particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    background-image: radial-gradient(var(--muted) 1px, transparent 1px);
    background-size: 40px 40px;
    opacity: 0.05;
    pointer-events: none;
}

/* --- TOOLTIPS CSS (Physics-Enhanced) --- */
[data-tooltip] {
    position: relative;
}

[data-tooltip]::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-5px) scale(0.95);
    padding: 6px 12px;
    background: rgba(0, 0, 0, 0.85);
    color: white;
    font-size: 0.75rem;
    border-radius: 8px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow), var(--rim-light);
    z-index: 100;
    transition: all 0.25s var(--spring-bounce);
}

[data-tooltip]:hover::before {
    opacity: 1;
    transform: translateX(-50%) translateY(-10px) scale(1);
}

/* --- SKELETON LOADING --- */
.skeleton {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.05) 75%);
    background-size: 200% 100%;
    animation: skeletonLoading 1.5s infinite;
    border-radius: 6px;
    color: transparent !important;
}

@keyframes skeletonLoading {
    from {
        background-position: 200% 0;
    }

    to {
        background-position: -200% 0;
    }
}

/* === WHITELIST SYSTEM === */
.whitelist-input-container {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
    background: rgba(0, 0, 0, 0.2);
    padding: 20px;
    border-radius: 16px;
    border: 1px solid var(--glass-border);
}

[data-theme="light"] .whitelist-input-container {
    background: rgba(255, 255, 255, 0.5);
}

[data-design="material"] .whitelist-input-container {
    background: var(--glass-btn);
    border-radius: 12px;
}

.wl-input-wrapper {
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
}

.wl-input-wrapper i {
    position: absolute;
    left: 15px;
    color: var(--muted);
}

.wl-input-wrapper input {
    width: 100%;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    padding: 12px 12px 12px 45px;
    border-radius: 12px;
    color: var(--txt);
    font-family: inherit;
    transition: 0.3s;
    outline: none;
}

.wl-input-wrapper input:focus {
    border-color: var(--p);
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
}

.whitelist-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 15px;
    max-height: 400px;
    overflow-y: auto;
    padding-right: 5px;
}

.wl-card {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--glass-border);
    border-radius: 14px;
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.2s ease;
    animation: fadeIn 0.3s ease;
    cursor: default;
}

[data-theme="light"] .wl-card {
    background: rgba(255, 255, 255, 0.6);
}

[data-design="material"] .wl-card {
    background: var(--glass-btn);
    border-radius: 8px;
}

.wl-card:hover {
    transform: translateY(-3px);
    border-color: var(--p);
}

.wl-avatar {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.wl-info {
    flex: 1;
    overflow: hidden;
}

.wl-name {
    font-weight: 700;
    font-size: 0.95rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--txt);
}

.wl-date {
    font-size: 0.7rem;
    color: var(--muted);
}

.btn-wl-remove {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: none;
    background: rgba(239, 68, 68, 0.1);
    color: var(--danger);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: 0.2s;
}

.btn-wl-remove:hover {
    background: var(--danger);
    color: white;
}

/* === NEW CUSTOMIZATION MODAL/* Settings Modal Styling */
.settings-group-card {
    background: var(--glass-gradient);
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    border: 1px solid var(--glass-border-top);
    border-radius: var(--radius);
    padding: 20px;
}

[data-theme="light"] .settings-group-card {
    background: rgba(255, 255, 255, 0.8);
}

.settings-group-title {
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 1.5px;
    color: var(--muted);
    margin-bottom: 16px;
    text-transform: uppercase;
}

.setting-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 40px;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    gap: 20px;
}

/* Allow multi-line content in setting rows */
.setting-row[style*="flex-start"] {
    align-items: flex-start;
}

.setting-row:last-child {
    border-bottom: none;
}

.setting-row:first-child {
    padding-top: 0;
}

.setting-label {
    font-weight: 600;
    color: var(--txt);
    font-size: 0.9rem;
    line-height: 1.5;
    min-width: 140px;
}

/* Solid Color Background Specific Styling */
.solid-color-controls {
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex: 1;
}

.solid-color-input-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.solid-color-buttons-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.solid-color-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.85rem;
    color: var(--muted);
    user-select: none;
    cursor: pointer;
}

.solid-color-checkbox input[type="checkbox"] {
    cursor: pointer;
    width: 16px;
    height: 16px;
}

/* Color picker wrapper improvements */
.color-circle-wrapper {
    position: relative;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--glass-border-top);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow);
}

.color-circle-wrapper:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-hover);
}

.color-circle-wrapper input[type="color"] {
    position: absolute;
    width: 200%;
    height: 200%;
    top: -50%;
    left: -50%;
    border: none;
    cursor: pointer;
}

/* Better button styling for personalization modal */
.modal-content-custom .btn {
    transition: all 0.2s ease;
}

.modal-content-custom .btn:hover {
    transform: translateY(-1px);
}

.modal-content-custom .btn-secondary {
    background: var(--glass-btn);
    border: 1px solid var(--glass-border-top);
}

.modal-content-custom .btn-secondary:hover {
    background: var(--glass-btn-hover);
    box-shadow: var(--shadow-hover);
}

/* Update buttons section */
.update-buttons-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 2px solid var(--glass-border-top);
    display: flex;
    gap: 12px;
}

#update-status-msg {
    text-align: center;
    font-size: 0.85rem;
    margin-top: 12px;
    color: var(--muted);
    min-height: 20px;
}

/* Improved select dropdown styling */
.cfg-in,
select.cfg-in {
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    color: var(--txt);
    padding: 10px 14px;
    border-radius: 10px;
    font-size: 0.9rem;
    transition: all 0.2s ease;
    outline: none;
}

.cfg-in:focus,
select.cfg-in:focus {
    border-color: var(--p);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

select.cfg-in {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23999' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
}

/* Fix for Select Options in Dark Mode */
select.cfg-in option {
    background-color: #1e1e1e;
    /* Dark background matching the theme */
    color: #e5e7eb;
    /* Light text */
}

/* Specific fix for light theme if needed, but defaults usually work there */
[data-theme="light"] select.cfg-in option {
    background-color: white;
    color: black;
}

.segment-control {
    background: #000;
    border-radius: 10px;
    padding: 4px;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 2px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.seg-control {
    background: var(--input-bg);
    border-radius: 10px;
    padding: 4px;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 2px;
    border: 1px solid var(--input-border);
}

[data-theme="light"] .segment-control {
    background: #e5e7eb;
    border-color: transparent;
}

.seg-item {
    background: transparent;
    border: none;
    color: var(--muted);
    padding: 6px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: 0.2s;
    white-space: nowrap;
}

.seg-item.text {
    font-weight: 600;
    padding: 6px 16px;
}

.seg-item:hover {
    color: var(--txt);
}

.seg-item.active {
    background: var(--p);
    color: white;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);
}

.color-circle-wrapper {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    position: relative;
    background: var(--bg);
}

.color-circle-wrapper input[type="color"] {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    cursor: pointer;
    padding: 0;
    margin: 0;
}

.seg-btn-reset {
    background: var(--p);
    color: white;
    border: none;
    padding: 6px 16px;
    border-radius: 8px;
    font-weight: 700;
    font-size: 0.85rem;
    cursor: pointer;
    transition: 0.2s;
}

.seg-btn-reset:hover {
    filter: brightness(1.1);
}

.maint-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.maint-action-btn {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 14px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    text-align: left;
    transition: all 0.2s ease;
}

.maint-action-btn:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

[data-theme="light"] .maint-action-btn {
    background: white;
    border-color: rgba(0, 0, 0, 0.1);
}

.maint-icon {
    width: 38px;
    height: 38px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    flex-shrink: 0;
}

.maint-icon.green {
    background: rgba(16, 185, 129, 0.15);
    color: #10b981;
}

.maint-icon.orange {
    background: rgba(245, 158, 11, 0.15);
    color: #f59e0b;
}

.maint-text {
    display: flex;
    flex-direction: column;
}

.maint-head {
    font-weight: 700;
    font-size: 0.9rem;
    color: var(--txt);
    margin-bottom: 2px;
}

.maint-sub {
    font-size: 0.7rem;
    color: var(--muted);
}

/* === RESPONSIVE MEJORADO === */
@media (max-width: 768px) {
    :root {
        --radius: 16px;
    }

    body {
        font-size: 14px;
    }

    .app-layout {
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        height: 70px;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        flex-direction: row;
        border-right: none;
        border-top: 1px solid var(--glass-border);
        padding: 8px 12px;
        justify-content: space-around;
        background: var(--sb);
        backdrop-filter: blur(40px) saturate(180%);
        z-index: 200;
        border-radius: 24px 24px 0 0;
        box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.4);
    }

    [data-design="material"] .sidebar {
        backdrop-filter: none;
        border-radius: 0;
    }

    nav {
        flex-direction: row;
        gap: 4px;
        overflow-x: auto;
        overflow-y: hidden;
        justify-content: space-evenly;
        width: 100%;
        margin-top: 0;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    nav::-webkit-scrollbar {
        display: none;
    }

    .nav-btn {
        width: 56px;
        min-width: 56px;
        height: 56px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 16px;
        padding: 8px;
        margin: 0;
        gap: 4px;
        background: transparent;
        border: none;
    }

    .nav-btn:hover {
        transform: none;
        background: transparent;
    }

    .nav-btn.active {
        transform: scale(1.05);
        background: var(--p);
        color: white;
        border: none;
        box-shadow: 0 4px 16px rgba(139, 92, 246, 0.5);
    }

    .nav-btn.active i {
        color: white;
        text-shadow: none;
    }

    .nav-btn span {
        display: none;
    }

    .nav-btn i {
        font-size: 1.3rem;
        margin: 0;
    }

    .brand,
    .sidebar-footer,
    .nav-label {
        display: none;
    }

    main {
        padding: 16px 16px 90px 16px;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }

    header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
        margin-bottom: 24px;
        position: sticky;
        top: 0;
        background: var(--bg);
        padding: 16px 0;
        z-index: 50;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .server-title h1 {
        font-size: 1.5rem;
        margin-bottom: 8px;
    }

    .server-ip-box {
        padding: 6px 14px;
        font-size: 0.75rem;
    }

    .actions {
        width: 100%;
        justify-content: space-between;
        gap: 8px;
        display: grid !important;
        grid-template-columns: repeat(4, 1fr);
        opacity: 1 !important;
        pointer-events: all !important;
    }

    .btn-control {
        width: 100%;
        height: 52px;
        border-radius: 14px;
        font-size: 1.1rem;
    }

    .power-card-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    .power-btn-large {
        padding: 20px;
        min-height: 100px;
        font-size: 0.85rem;
    }

    .power-btn-large i {
        font-size: 1.6rem;
    }

    .stats-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .card {
        padding: 20px;
        min-height: 160px;
    }

    .stat-big {
        font-size: 2rem;
    }

    .chart-mini {
        height: 100px;
    }

    .console-box {
        height: calc(100vh - 200px);
        min-height: 400px;
        border-radius: 16px;
    }

    .console-header {
        padding: 8px 14px;
    }

    .console-input-area {
        padding: 10px 14px;
        gap: 10px;
    }

    #console-input {
        font-size: 0.85rem;
    }

    .versions-container,
    .labs-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .mod-card-modern,
    .version-card {
        min-height: 200px;
    }

    .mod-cover {
        height: 100px;
    }

    .mod-cover i {
        font-size: 2.8rem;
    }

    .mod-body {
        padding: 18px;
    }

    .mod-title {
        font-size: 1.1rem;
    }

    .mod-desc {
        font-size: 0.85rem;
    }

    .whitelist-input-container {
        flex-direction: column;
        padding: 16px;
        gap: 12px;
    }

    .whitelist-grid {
        grid-template-columns: 1fr;
        max-height: 500px;
    }

    .wl-card {
        padding: 14px;
    }

    .cfg-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .modal {
        width: 95%;
        max-width: none;
        max-height: 85vh;
        border-radius: 20px;
        margin: 0 10px;
    }

    .modal-header {
        padding: 16px 20px;
        flex-wrap: wrap;
    }

    .modal-header h3 {
        font-size: 1.1rem;
    }

    .modal-small {
        max-width: 90%;
    }

    .settings-group-card {
        padding: 16px;
        gap: 12px;
    }

    .setting-row {
        flex-direction: column;
        align-items: flex-start;
        height: auto;
        gap: 10px;
    }

    .segment-control {
        width: 100%;
        justify-content: stretch;
    }

    .seg-item {
        flex: 1;
    }

    .maint-grid {
        grid-template-columns: 1fr;
    }

    [data-tooltip]::before {
        display: none;
    }

    .file-list {
        font-size: 0.85rem;
    }

    .btn {
        padding: 10px 20px;
        font-size: 0.85rem;
        border-radius: 12px;
    }

    .btn-primary,
    .btn-secondary,
    .btn-ghost {
        min-height: 44px;
    }

    h1 {
        font-size: 1.5rem;
    }

    h2 {
        font-size: 1.3rem;
    }

    h3 {
        font-size: 1.1rem;
    }

    * {
        -webkit-tap-highlight-color: transparent;
    }

    .status-widget {
        display: none;
    }
}



/* ===== COMMAND PALETTE ===== */
.command-palette-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
    z-index: 9999;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 15vh;
    animation: fadeIn 0.2s ease;
}

.command-palette {
    width: 90%;
    max-width: 600px;
    max-height: 70vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    animation: slideDown 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.command-palette-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 20px 24px;
    border-bottom: 1px solid var(--glass-border);
}

.command-palette-header i {
    color: var(--p);
    font-size: 1.2rem;
}

.command-input {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    font-size: 1.1rem;
    color: var(--txt);
    font-family: 'Manrope', sans-serif;
    font-weight: 600;
}

.command-input::placeholder {
    color: var(--muted);
    font-weight: 400;
}

.kbd-hint {
    padding: 4px 8px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    border-radius: 6px;
    font-size: 0.75rem;
    font-family: 'JetBrains Mono', monospace;
    color: var(--muted);
}

.command-results {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
    max-height: 400px;
}

.command-item {
    padding: 12px 16px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 4px;
}

.command-item:hover,
.command-item.selected {
    background: rgba(139, 92, 246, 0.15);
    border: 1px solid var(--p);
}

.command-item i {
    width: 20px;
    text-align: center;
    color: var(--p);
}

.command-item-text {
    flex: 1;
}

.command-item-name {
    font-weight: 600;
    color: var(--txt);
    font-size: 0.95rem;
}

.command-item-shortcut {
    font-size: 0.75rem;
    color: var(--muted);
    font-family: 'JetBrains Mono', monospace;
}

.command-palette-footer {
    padding: 12px 24px;
    border-top: 1px solid var(--glass-border);
    background: rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .command-palette-footer {
    background: rgba(255, 255, 255, 0.5);
}

.command-hint {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 0.8rem;
    color: var(--muted);
}

.command-hint kbd {
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    border-radius: 4px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    margin-right: 4px;
}

.command-empty {
    padding: 40px 20px;
    text-align: center;
    color: var(--muted);
}

.command-empty i {
    font-size: 2.5rem;
    margin-bottom: 12px;
    opacity: 0.5;
}

/* ===== NEW LAB COLORS ===== */
.lab-green .mod-cover {
    background-image: linear-gradient(135deg, #10b981, #047857) !important;
}

.lab-indigo .mod-cover {
    background-image: linear-gradient(135deg, #6366f1, #4338ca) !important;
}

.lab-red .mod-cover {
    background-image: linear-gradient(135deg, #ef4444, #b91c1c) !important;
}

/* ===== KEYBOARD SHORTCUT HINTS ===== */
.shortcut-hint {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--glass-gradient);
    backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    padding: 12px 16px;
    border-radius: 12px;
    font-size: 0.8rem;
    color: var(--muted);
    display: none;
    z-index: 8000;
    animation: fadeIn 0.3s ease;
}

.shortcut-hint.show {
    display: block;
}

.shortcut-hint kbd {
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    border-radius: 4px;
    font-family: 'JetBrains Mono', monospace;
    color: var(--p);
    margin: 0 4px;
}

/* ===== RESPONSIVE COMMAND PALETTE ===== */
@media (max-width: 768px) {
    .command-palette {
        width: 95%;
        max-height: 60vh;
    }

    .command-palette-overlay {
        padding-top: 10vh;
    }

    .command-input {
        font-size: 1rem;
    }

    .command-item {
        padding: 10px 12px;
    }
}

/* ===== ACCOUNT DROPDOWN ===== */
.account-section {
    margin-bottom: 0;
    position: relative;
    flex: 1;
}

/* Account and Logout Combined Row */
.account-logout-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
}

.sidebar-btn-small {
    width: 48px;
    height: 48px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.account-trigger {
    width: 100%;
    padding: 12px 16px;
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.2s ease;
    color: var(--txt);
    font-family: 'Manrope', sans-serif;
}

.account-trigger:hover {
    background: rgba(139, 92, 246, 0.2);
    border-color: rgba(139, 92, 246, 0.5);
    transform: translateY(-1px);
}

.account-info {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    font-size: 0.9rem;
}

.account-info i {
    color: var(--p);
    font-size: 1.2rem;
}

.account-chevron {
    font-size: 0.75rem;
    color: var(--muted);
    transition: transform 0.3s ease;
}

.account-trigger.active .account-chevron {
    transform: rotate(180deg);
}

.account-dropdown {
    position: absolute;
    bottom: 100%;
    left: 0;
    right: 0;
    margin-bottom: 8px;
    background: var(--glass-gradient);
    backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow);
    animation: dropdownSlideUp 0.2s ease;
    z-index: 100;
}

@keyframes dropdownSlideUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.account-dropdown-item {
    width: 100%;
    padding: 12px 16px;
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--glass-border);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.15s ease;
    color: var(--txt);
    font-family: 'Manrope', sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
}

.account-dropdown-item:last-child {
    border-bottom: none;
}

.account-dropdown-item:hover {
    background: rgba(139, 92, 246, 0.15);
}

.account-dropdown-item i {
    color: var(--p);
    width: 16px;
    text-align: center;
}

/* Account Modal Specific Styles */
#account-modal .setting-row {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

#account-modal .setting-label {
    font-weight: 700;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--muted);
}

#account-modal code {
    font-size: 0.95rem;
}

/* Responsive Account Dropdown */
@media (max-width: 768px) {
    .account-trigger {
        padding: 10px 14px;
    }

    .account-info {
        font-size: 0.85rem;
    }
}

/* ==================== LOGIN SCREEN BACKGROUND FIX ==================== */
#login-screen {
    background: transparent !important;
    /* backdrop-filter: blur(5px); Removed to keep background sharp */
}

.login-box {
    background: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

[data-design="material"] .login-box {
    background: var(--modal-bg) !important;
    backdrop-filter: none !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    border: none;
}

[data-theme="light"] .login-box {
    background: rgba(255, 255, 255, 0.75) !important;
    border: 1px solid rgba(255, 255, 255, 0.5);
    color: #000;
}

/* ==================== MACOS TAHOE SLIDER (Liquid Glass Pill) ==================== */

/* Track: Frosted glass tube */
input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.12);
    border-radius: 100px;
    outline: none;
    margin: 12px 0;
    cursor: pointer;
    position: relative;

    /* Glass tube depth */
    box-shadow:
        inset 0 1px 2px rgba(0, 0, 0, 0.25),
        inset 0 0 0 1px rgba(255, 255, 255, 0.08);

    /* Progress fill (Aether purple glow) */
    background-image: linear-gradient(90deg,
            var(--p) 0%,
            var(--p-light) 100%);
    background-size: 0% 100%;
    background-repeat: no-repeat;
}

/* Track filled portion glow */
input[type="range"]::-webkit-slider-runnable-track {
    border-radius: 100px;
}

/* Thumb: Frosted glass PILL (elongated capsule) */
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 26px;
    height: 22px;
    border-radius: 11px;
    /* Pill shape */
    cursor: pointer;
    transition: all 0.2s var(--spring-bounce);
    border: none;
    position: relative;

    /* Frosted glass body with inner light */
    background:
        radial-gradient(ellipse at 30% 25%, rgba(255, 255, 255, 0.95) 0%, transparent 45%),
        linear-gradient(180deg,
            rgba(255, 255, 255, 0.98) 0%,
            rgba(245, 245, 250, 0.95) 35%,
            rgba(230, 230, 240, 0.9) 100%);

    /* Glass depth + soft shadow */
    box-shadow:
        0 3px 10px rgba(0, 0, 0, 0.2),
        0 1px 3px rgba(0, 0, 0, 0.1),
        0 6px 16px rgba(139, 92, 246, 0.12),
        inset 0 1px 2px rgba(255, 255, 255, 1),
        inset 0 -1px 1px rgba(0, 0, 0, 0.03);
}

input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.08);

    /* Brighter on hover */
    background:
        radial-gradient(ellipse at 30% 25%, rgba(255, 255, 255, 1) 0%, transparent 45%),
        linear-gradient(180deg,
            #ffffff 0%,
            #f8f8fc 35%,
            #ececf4 100%);

    box-shadow:
        0 4px 14px rgba(0, 0, 0, 0.25),
        0 2px 5px rgba(0, 0, 0, 0.15),
        0 8px 20px rgba(139, 92, 246, 0.18),
        inset 0 1px 3px rgba(255, 255, 255, 1),
        inset 0 -1px 1px rgba(0, 0, 0, 0.03);
}

/* DRAGGING STATE: Semi-transparent */
input[type="range"]:active::-webkit-slider-thumb {
    transform: scale(1.02);
    opacity: 0.75;
    transition-duration: 0.08s;
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.15),
        0 1px 2px rgba(0, 0, 0, 0.1),
        0 4px 12px rgba(139, 92, 246, 0.1),
        inset 0 1px 2px rgba(255, 255, 255, 0.9);
}

/* Firefox */
input[type="range"]::-moz-range-track {
    height: 6px;
    background: rgba(255, 255, 255, 0.12);
    border-radius: 100px;
    box-shadow:
        inset 0 1px 2px rgba(0, 0, 0, 0.25),
        inset 0 0 0 1px rgba(255, 255, 255, 0.08);
}

input[type="range"]::-moz-range-progress {
    height: 6px;
    background: linear-gradient(90deg, var(--p), var(--p-light));
    border-radius: 100px 0 0 100px;
}

input[type="range"]::-moz-range-thumb {
    width: 26px;
    height: 22px;
    border-radius: 11px;
    border: none;
    cursor: pointer;
    transition: all 0.2s var(--spring-bounce);

    background:
        radial-gradient(ellipse at 30% 25%, rgba(255, 255, 255, 0.95) 0%, transparent 45%),
        linear-gradient(180deg,
            rgba(255, 255, 255, 0.98) 0%,
            rgba(245, 245, 250, 0.95) 35%,
            rgba(230, 230, 240, 0.9) 100%);

    box-shadow:
        0 3px 10px rgba(0, 0, 0, 0.2),
        0 1px 3px rgba(0, 0, 0, 0.1),
        0 6px 16px rgba(139, 92, 246, 0.12),
        inset 0 1px 2px rgba(255, 255, 255, 1),
        inset 0 -1px 1px rgba(0, 0, 0, 0.03);
}

input[type="range"]::-moz-range-thumb:hover {
    transform: scale(1.08);
}

input[type="range"]:active::-moz-range-thumb {
    transform: scale(1.02);
    opacity: 0.75;
}

/* Light theme adjustments */
[data-theme="light"] input[type="range"] {
    background: rgba(0, 0, 0, 0.1);
    box-shadow:
        inset 0 1px 2px rgba(0, 0, 0, 0.12),
        0 1px 0 rgba(255, 255, 255, 0.8);
}

[data-theme="light"] input[type="range"]::-webkit-slider-thumb,
[data-theme="light"] input[type="range"]::-moz-range-thumb {
    box-shadow:
        0 2px 6px rgba(0, 0, 0, 0.12),
        0 1px 2px rgba(0, 0, 0, 0.08),
        inset 0 1px 2px rgba(255, 255, 255, 1);
}

/* === SLIDER TICK MARKS === */
.slider-container {
    position: relative;
    padding-bottom: 28px;
}

.slider-ticks {
    position: relative;
    height: 24px;
    margin-top: 8px;
}

.slider-tick {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    transform: translateX(-50%);
}

.slider-tick-mark {
    width: 1px;
    height: 6px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 1px;
}

.slider-tick-label {
    font-size: 0.7rem;
    color: var(--muted);
    font-weight: 500;
    font-family: var(--font-mono);
}

[data-theme="light"] .slider-tick-mark {
    background: rgba(0, 0, 0, 0.2);
}

/* ==================== GLOBAL LAYOUT FIXES ==================== */
.password-row {
    display: flex;
    gap: 10px;
    width: 100%;
}

.password-row .cfg-in {
    flex: 1;
    margin-bottom: 0;
}

.password-row .show-pass-btn {
    width: auto;
    white-space: nowrap;
}

/* ==================== macOS TAHOE SLIDER (Apple HIG) ==================== */
.tahoe-slider-row {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 15px;
}

.tahoe-slider-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
    position: relative;
    /* Anchor for absolute value */
}

.tahoe-slider-track-wrapper {
    width: 100%;
    position: relative;
    height: 24px;
    /* Container height for alignment */
    display: flex;
    align-items: center;
}

/* Slider Track - Thin & Glassy */
.tahoe-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    /* HIG standard: thin track */
    background: rgba(255, 255, 255, 0.15);
    /* Translucent glass track */
    border-radius: 3px;
    outline: none;
    cursor: pointer;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Slider Thumb - Clean Pill/Circle */
.tahoe-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    /* Circular for classic HIG or slight pill */
    background: #ffffff;
    cursor: grab;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: transform 0.15s cubic-bezier(0.2, 0.8, 0.2, 1);
    margin-top: -11px;
    /* Center thumb vertically on 6px track */
}

.tahoe-slider::-webkit-slider-thumb:active {
    cursor: grabbing;
    transform: scale(0.95);
    background: #f5f5f5;
}

/* Tick Marks Container - Relative for absolute positioning */
.tahoe-ticks {
    position: relative;
    width: 100%;
    height: 20px;
    margin-top: 6px;
    padding: 0;
    /* Remove padding, handling via positioning */
    box-sizing: border-box;
}

/* Individual Tick - Absolute positioning for mathematical precision */
.tahoe-tick {
    position: absolute;
    top: 0;
    transform: translateX(-50%);
    /* Center the tick horizontally */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    width: auto;
}

/* 
   PRECISE THUMB ALIGNMENT FORMULA:
   Pos = 14px + (Percentage * (TotalWidth - 28px))
   
   Thumb Width = 28px
   Padding Offset = 14px (Thumb Radius)
   Available Travel = 100% - 28px
*/

.tahoe-tick:nth-child(1) {
    left: 14px;
}

/* 0% */
.tahoe-tick:nth-child(2) {
    left: calc(14px + 0.2 * (100% - 28px));
}

/* 20% */
.tahoe-tick:nth-child(3) {
    left: calc(14px + 0.4 * (100% - 28px));
}

/* 40% */
.tahoe-tick:nth-child(4) {
    left: calc(14px + 0.6 * (100% - 28px));
}

/* 60% */
.tahoe-tick:nth-child(5) {
    left: calc(14px + 0.8 * (100% - 28px));
}

/* 80% */
.tahoe-tick:nth-child(6) {
    left: calc(14px + 1.0 * (100% - 28px));
}

/* 100% */

/* Content styling */
.tahoe-tick .tick-pill,
.tahoe-tick .tick-num {
    white-space: nowrap;
}

/* Subtle Vertical Line Tick */
.tahoe-tick .tick-pill {
    display: block;
    width: 2px;
    height: 8px;
    /* Subtle height */
    background: rgba(255, 255, 255, 0.3);
    border-radius: 1px;
}

/* Highlighted tick for active/major steps */
.tahoe-tick:first-child .tick-pill,
.tahoe-tick:last-child .tick-pill {
    background: rgba(255, 255, 255, 0.6);
}

/* Tick Number - San Francisco Style */
.tahoe-tick .tick-num {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 500;
    letter-spacing: 0.3px;
}

/* Value Display - Top Right or Floating */
.tahoe-value {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: #ffffff;
    position: absolute;
    right: 0;
    top: -30px;
    /* Move to header line */
}