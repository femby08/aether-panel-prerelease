<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aether Panel</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>

    <div class="background-layer">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div id="appearance-modal" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-header">
                <h3><i class="fa-solid fa-paintbrush"></i> Personalizaci贸n</h3>
                <button class="btn-icon" onclick="closeAllModals()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                
                <div class="settings-group">
                    <h4 style="color:var(--warning); margin-bottom:15px; text-transform:uppercase; font-size:0.8rem; letter-spacing:1px;">Mantenimiento</h4>
                    <div class="maint-grid">
                        
                        <div class="maint-card" onclick="checkUpdate()">
                            <div class="maint-icon green"><i class="fa-solid fa-cloud-arrow-down"></i></div>
                            <div class="maint-text">
                                <span>Actualizar</span>
                                <small>Buscar versi贸n</small>
                            </div>
                        </div>

                        <div class="maint-card" onclick="forceUIUpdate()">
                            <div class="maint-icon orange"><i class="fa-solid fa-rotate"></i></div>
                            <div class="maint-text">
                                <span>Recargar UI</span>
                                <small>Reparar fallos</small>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="update-modal" class="modal-overlay">
        <div class="modal-card center-content">
            <div class="update-icon"></div>
            <h3>Actualizaci贸n Disponible</h3>
            <p id="update-text" class="text-muted">Nueva versi贸n detectada.</p>
            <div class="modal-actions" id="up-actions">
                </div>
        </div>
    </div>

    <div class="app-container">
        
        <aside class="sidebar glass">
            <div class="brand">
                <div class="logo-icon"><i class="fa-solid fa-bolt"></i></div>
                <div class="brand-text">
                    <span class="title">Aether</span>
                    <span class="version" id="version-display">Cargando...</span>
                </div>
            </div>
            
            <nav class="nav-links">
                <div class="nav-category">CONTROL</div>
                <button onclick="setTab('stats')" class="nav-btn active" id="nav-stats">
                    <i class="fa-solid fa-chart-pie"></i> Monitor
                </button>
                <button onclick="setTab('console')" class="nav-btn" id="nav-console">
                    <i class="fa-solid fa-terminal"></i> Consola
                </button>
                <button onclick="setTab('versions')" class="nav-btn" id="nav-versions">
                    <i class="fa-solid fa-layer-group"></i> Versiones
                </button>

                <div class="nav-category">SISTEMA</div>
                <button onclick="setTab('labs')" class="nav-btn" id="nav-labs">
                    <i class="fa-solid fa-flask"></i> Labs
                </button>
                <button onclick="setTab('config')" class="nav-btn" id="nav-config">
                    <i class="fa-solid fa-sliders"></i> Ajustes
                </button>
            </nav>

            <div class="sidebar-bottom">
                <button class="btn-personalizar" onclick="document.getElementById('appearance-modal').classList.add('active')">
                    <i class="fa-solid fa-palette"></i> Personalizar
                </button>
                <div class="status-card">
                    <div id="status-dot" class="dot offline"></div>
                    <div class="status-info">
                        <span id="status-text">OFFLINE</span>
                        <small>Estado</small>
                    </div>
                </div>
            </div>
        </aside>

        <main class="content">
            <header class="header">
                <div class="header-left">
                    <h1>Panel de Control</h1>
                    <div class="ip-badge"><i class="fa-solid fa-wifi"></i> <span id="ip-display">Localhost</span></div>
                </div>
                <div class="header-controls">
                    <button onclick="api('power/start')" class="ctrl-btn start"><i class="fa-solid fa-play"></i></button>
                    <button onclick="api('power/restart')" class="ctrl-btn restart"><i class="fa-solid fa-rotate"></i></button>
                    <button onclick="api('power/stop')" class="ctrl-btn stop"><i class="fa-solid fa-stop"></i></button>
                    <button onclick="api('power/kill')" class="ctrl-btn kill"><i class="fa-solid fa-skull"></i></button>
                </div>
            </header>

            <div id="tab-stats" class="tab-view active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">CPU <i class="fa-solid fa-microchip"></i></div>
                        <div class="stat-value"><span id="cpu-val">0%</span></div>
                        <div class="chart-wrapper"><canvas id="cpu-chart"></canvas></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">RAM <i class="fa-solid fa-memory"></i></div>
                        <div class="stat-value"><span id="ram-val">0 GB</span></div>
                        <div class="stat-sub">de 4 GB</div>
                        <div class="chart-wrapper"><canvas id="ram-chart"></canvas></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">DISCO <i class="fa-solid fa-hard-drive"></i></div>
                        <div class="stat-value"><span id="disk-val">0 MB</span></div>
                        <div class="stat-sub">Usado</div>
                        <div class="progress-bg"><div id="disk-bar" class="progress-fill"></div></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">JUGADORES <i class="fa-solid fa-users"></i></div>
                        <div class="stat-value"><span id="players-val">0/0</span></div>
                        <div class="stat-sub">En l铆nea</div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>Actividad Reciente</h3>
                    <div class="activity-table-container">
                        <table class="activity-table">
                            <thead><tr><th>EVENTO</th><th>USUARIO</th><th>HORA</th><th style="text-align:right">ESTADO</th></tr></thead>
                            <tbody id="activity-body">
                                </tbody>
                        </table>
                        <div class="table-footer">Click para ver historial completo</div>
                    </div>
                </div>
            </div>

            <div id="tab-console" class="tab-view">
                <div class="console-box">
                    <div id="terminal"></div>
                </div>
            </div>

            <div id="tab-config" class="tab-view">
                <div class="glass-panel padded">
                    <div class="panel-head">
                        <h3>Configuraci贸n</h3>
                        <button class="btn-primary" onclick="saveCfg()">Guardar</button>
                    </div>
                    <div id="cfg-list" class="cfg-grid"></div>
                </div>
            </div>

        </main>
    </div>

    <script src="app.js"></script>
    
    <style>
        :root {
            --bg: #09090b;
            --glass: rgba(20, 20, 25, 0.6);
            --border: rgba(255, 255, 255, 0.08);
            --accent: #6366f1;
            --text: #ffffff;
            --text-muted: #9ca3af;
        }

        /* Estructura Mantenimiento (Foto 3) */
        .maint-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .maint-card {
            background: rgba(255,255,255,0.03); border: 1px solid var(--border);
            border-radius: 12px; padding: 15px; cursor: pointer; display: flex; align-items: center; gap: 15px;
            transition: 0.2s;
        }
        .maint-card:hover { background: rgba(255,255,255,0.06); }
        .maint-icon { 
            width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
        }
        .maint-icon.green { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        .maint-icon.orange { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .maint-text { display: flex; flex-direction: column; }
        .maint-text span { font-weight: 600; font-size: 0.95rem; }
        .maint-text small { color: var(--text-muted); font-size: 0.75rem; }

        /* Estilos Tarjetas (Foto 2) */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card {
            background: #0f0f13; border: 1px solid var(--border); border-radius: 16px; padding: 25px;
            position: relative; overflow: hidden; height: 160px; display: flex; flex-direction: column; justify-content: space-between;
        }
        .stat-header { color: var(--text-muted); font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
        .stat-value { font-size: 2.8rem; font-weight: 700; color: #fff; line-height: 1; text-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
        .stat-sub { color: var(--text-muted); font-size: 0.85rem; margin-top: 5px; }
        .chart-wrapper { position: absolute; bottom: 0; left: 0; width: 100%; height: 60px; opacity: 0.5; pointer-events: none; }
        .progress-bg { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-top: auto; }
        .progress-fill { height: 100%; background: #6366f1; border-radius: 10px; width: 0%; transition: width 0.5s; box-shadow: 0 0 10px #6366f1; }

        /* Estilos Sidebar y Botones */
        .btn-personalizar {
            background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: #fff; width: 100%; padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 500; transition: 0.2s;
        }
        .btn-personalizar:hover { background: rgba(255,255,255,0.1); }
        
        .modal-overlay.active { display: flex !important; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-card { background: #18181b; width: 500px; padding: 25px; border-radius: 16px; border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
    </style>
</body>
</html>
